<script>
    clearActiveMenu();
    $('#gallery-nav').addClass('nav-gallery-active');
    $('.content-top').attr("id", "gallery");
</script>

<div id="gallery-content" class="mCustomScrollbar _mCS_1">
    <div class="mCustomScrollBox mCS-light-thick" id="mCSB_1">
        <div class="mCSB_container" >
            <h1>GALLERY</h1> 
            
            <div id="gallery-items">
                <script id="gallery_template" type="x-tmpl-mustache">
                    <a class="fancybox" rel="gallery1" href="{{photo_url_abs}}">
                        <span class="gallery-thumbnail" style="background-image:url({{photo_url_abs}});"></span>
                    </a>
                </script>
            </div>
      
        </div>
    </div>
</div>



<script>
    
      $(document).ready(function() {
        
            function renderPageData(){
                //var repoList = getRepoDetailsByName('partners');
                var repoList = getRepoList();
                renderBanner('#gallery_template','#gallery-items',repoList);
            }
            loadMallDataCached(renderPageData);
        });
        
        
        
    function renderBanner(repo_template, repo_txt, repo){
        var item_list = [];
        var item_rendered = [];
        var repo_template_html = $(repo_template).html();
        Mustache.parse(repo_template_html);   // optional, speeds up future uses
        
        $.each( repo , function( key, val ) {
            if( val.name == "gallery"){
                $.each( val.images , function( key, val ) {
                    var repo_rendered = Mustache.render(repo_template_html,val);
                    item_list.push(repo_rendered);
                });
     
            }
            
        });
        item_list.sort(function(a, b){
        if(a.name < b.name) return -1;
        if(a.name > b.name) return 1;
        return 0;
        });
        $.each( item_list , function( key, val ) {
            var repo_rendered = Mustache.render(banner_template_html,val);
            item_rendered.push(repo_rendered);
               
        });

        $(repo_txt).show();
        $(repo_txt).html(item_rendered.join(''));

    }

</script>