<script>
    clearActiveMenu();
    $('#vendors-nav').addClass('nav-vendors-active');
    $('.content-top').attr("id", "vendors");
</script>
<div id="vendors-content" class="mCustomScrollbar _mCS_1">
    <div class="mCustomScrollBox mCS-light-thick" id="mCSB_1">
        <div class="mCSB_container" >
            <h1 class="dotted">VENDORS LIST</h1>   
            
            <ul id="vendors_list">
               <script id="vendors_list_template" type="x-tmpl-mustache">
                        <li>
                            <a class="{{textColor}}" href="{{storeSlug}}">{{name}}</a>
                        </li>
                </script>
                
            </ul>
        </div>
    </div>
</div>


<script>
 $(document).ready(function() {
    function renderPageData(){        
        console.log(getStoresList()); 
        renderStoresList('#vendors_list_template', '#vendors_list', getStoresList());
    }     
    loadMallDataCached(renderPageData);
 });
 
 
 
 
  
function renderStoresList(item_template_id,not_empty_section_id,stores){
    var item_list = [];
    var count = 1;
    var item_template_html = $(item_template_id).html();
    Mustache.parse(item_template_html);
    $.each( stores , function( key, val ) {
        if (count % 2 == 0){
            val.textColor = "green";
        }
        count+=1;
        
        var str = (val.description).trim();
        if(str != "" || str != null){
            val.storeSlug = '../vendors/' + val.slug;
        }else{
            val.storeSlug = '#';
        }
    
        
        var item_rendered = Mustache.render(item_template_html,val);
        item_list.push(item_rendered);
    });
    if(stores.length > 0){
        $(not_empty_section_id).show();
        $(not_empty_section_id).html(item_list.join(''));
    }
}
</script>